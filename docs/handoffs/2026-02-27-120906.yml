meta:
  date: 2026-02-27
  author: claude
  phase: "Fas 1: Grund"
  status: aktiv
  session_notes: |
    Session 9. Korsreferenser (1.4) implementerat och klart.

    Gjort:
    - Companion-typ utokad med optional id-falt som matchar CROP_LIST
    - Rotation-typ andrad fran string[] till RotationItem[] med optional id
    - GoodToKnow-typ utokad med optional refs (CropRef[]) for inline-lankar
    - Ny cropUtils.ts med hasProfile() helper
    - Ny ChevronRightIcon i ikonsystemet
    - CompanionSection: klickbara kort med CropGraphic-ikoner, chevron, hover-effekt
    - Sektionsnamn bytt fran "Companion planting" till "Samodling"
    - RotationSection: pill-badges med ikoner, klickbara for grodor med profil
    - GoodToKnow: subtila inline-lankar (accent-farg + understrykning)
    - onNavigate-callback tradad fran App.tsx genom CropPage till alla tre sektioner
    - Navigation byter selectedCrop + scrollar till toppen
    - Ikon-fix: anvander CropGraphic istallet for Icon for crop-specifika ikoner
    - "Tomater" -> "Tomat" i hallon companions
    - Roadmap uppdaterad: 1.4 markerad som klar

    Tre commits:
    1. feat(data): add cross-reference ids to companion and rotation data
    2. feat(ui): add cross-reference navigation to three sections
    3. docs(roadmap): mark 1.4 Korsreferenser as complete

tech_stack:
  current:
    - Vite 7.3 (build)
    - React 19 (hooks, JSX)
    - TypeScript 5.9 (strict mode)
    - Recharts 3.7 (NutritionChart)
    - "@fontsource/fraunces + @fontsource/lora (self-hosted)"
    - CSS Modules + CSS custom properties
  planned:
    app: "React Native + Expo (framtida, betald version)"

structure:
  docs:
    - docs/ROADMAP.md
    - docs/guides/ny-groda.md
    - docs/guides/designsystem.md
    - docs/guides/svg-illustrationer.md
    - docs/plans/1.2-separera-data.yml (klar)
    - docs/plans/1.3-grafisk-profil.yml (klar)
    - docs/plans/1.6-frukt-kategori.yml (planerad)
    - docs/handoffs/
  src:
    - src/data/types.ts (Companion med id, RotationItem, CropRef, GoodToKnow med refs)
    - src/data/cropUtils.ts (NY - hasProfile helper)
    - src/data/crops/index.ts (76 entries)
    - src/data/crops/*.ts (5 profiler med id-kopplade companions och rotation)
    - src/components/crop/CompanionSection.tsx (klickbar, CropGraphic-ikoner, "Samodling")
    - src/components/crop/RotationSection.tsx (pill-badges, klickbar)
    - src/components/crop/GoodToKnow.tsx (inline-lankar via refs)
    - src/components/icons/index.tsx (36 ikoner inkl ChevronRightIcon)
    - src/components/icons/Icon.tsx (ICON_MAP med chevron-right)
    - src/components/pages/CropPage.tsx (onNavigate prop)
    - src/App.tsx (onNavigate wiring)

database: null
api_endpoints: null

commands:
  - "npm run dev    # Starta Vite dev server"
  - "npm run build  # Bygger till dist/"
  - "npx tsc --noEmit  # Typkontroll utan output"

next_steps:
  - "1.5 Sasongsvy v1 - manadsbaserad startskarm"
  - "1.6 Frukt som fjarde kategori - plan finns i docs/plans/1.6-frukt-kategori.yml"
  - "1.7 Fler profiler - 76 entries men bara 5 har full data"
  - "Borja skriva fler grodprofiler (artor, squash, sallat ar hogst prioriterade)"

context:
  decisions:
    - "Samodling som svenskt namn istallet for Companion planting"
    - "Auto ikon-lookup via CropGraphic for companions och rotation"
    - "Pill-badges for vaxtfoljd, inline-lankar for bra att veta"
    - "Companions utan profil visas som icke-klickbar text (ingen sarskild styling)"
    - "RotationItem-objekt istallet for strang-arrayer"
    - "CropRef med id+name i GoodToKnow.refs for explicit fritext-lankifiering"
  constraints:
    - "Aldrig unicode-emojis i data eller UI"
    - "Aldrig en-dash i kallkod"
    - "All text pa svenska, kompis-ton"
    - "Alla ikoner: 1.8px stroke, round caps, 24x24, subtil fill opacity 0.12"

known_issues:
  - "Odlingszonerna behover faktagranskas"
  - "Bundle size >500KB pga Recharts"
  - "prototypes/ kan arkiveras/tas bort - allt ar migrerat"
  - "76 entries men bara 5 har fulla profiler"
  - "GoodToKnow refs bara tillagda pa tomat (potatis-ref) - fler kan laggas till"
  - "Sorter-sektionen har inga korsreferenser (sortnamn, inte andra grodor)"
