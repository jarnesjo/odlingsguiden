meta:
  date: 2026-03-01
  author: claude
  phase: "Fas 1: Grund"
  status: aktiv
  session_notes: |
    Session 18. Klickbar logga, footer, Nginx-config, NutritionChart-fix, code-splitting och SEO.

    Gjort:
    - Loggan i navbar ar nu klickbar (Link to="/")
    - Footer "Skapad med omtanke av Lilla Bosgarden" pa alla sidor
    - Nginx SPA fallback-konfiguration (nginx.conf)
    - NutritionChart: bytt fran ResponsiveContainer till ResizeObserver
    - NutritionChart: animering avstaengd for renare upplevelse
    - Lazy-load av NutritionChart (Recharts i separat chunk, 323KB)
    - React vendor-libs i separat chunk (47KB)
    - Default SEO meta description i index.html
    - Plan for 1.10 code-splitting (docs/plans/1.10-code-splitting.yml)

    Commits (6 st):
    - feat(ui): make navbar logo clickable - navigates to home
    - feat(ui): add footer with Lilla Bosgarden attribution on all pages
    - chore(config): add nginx SPA fallback configuration
    - docs(claude): fix whitespace formatting in CLAUDE.md
    - fix(ui): replace ResponsiveContainer with ResizeObserver and disable chart animation
    - perf(ui): lazy-load NutritionChart and split vendor chunks
    - feat(seo): add default meta description and full title to index.html

tech_stack:
  current:
    - Vite 7.3 (build)
    - React 19 (hooks, JSX)
    - TypeScript 5.9 (strict mode)
    - React Router 7.13 (URL-routing)
    - Recharts 3.7 (NutritionChart, lazy-loaded)
    - "@fontsource/fraunces + @fontsource/lora (self-hosted)"
    - CSS Modules + CSS custom properties
  planned:
    app: "React Native + Expo (framtida, betald version)"

structure:
  docs:
    - docs/ROADMAP.md
    - docs/guides/ny-groda.md
    - docs/guides/designsystem.md
    - docs/guides/svg-illustrationer.md
    - docs/guides/kallor.md
    - docs/research/f1-frodebatten.md
    - docs/research/faktacheck-2026-03-01.md
    - docs/plans/1.8-grod-navigering.yml
    - docs/plans/1.10-code-splitting.yml
    - docs/handoffs/
  src:
    - src/data/types.ts
    - src/data/categories.ts (blommor hidden)
    - src/data/cropUtils.ts
    - src/data/cropSlugs.ts (slug <-> id mappning)
    - "src/data/crops/index.ts (37 profiler registrerade)"
    - "src/data/crops/*.ts (37 profiler, 5 faktacheckade)"
    - "src/components/illustrations/CropGraphic.tsx (37 illustrationer)"
    - "src/components/icons/index.tsx (48 ikoner)"
    - src/hooks/useDocumentMeta.ts (dynamisk title + description)
    - src/hooks/useLocalStorage.ts
  config:
    - nginx.conf (SPA fallback for produktion)
  scripts:
    - scripts/generate-sitemap.ts

database: null
api_endpoints: null

commands:
  - "npm run dev      # Starta Vite dev server"
  - "npm run build    # Bygger till dist/ + genererar sitemap"
  - "npm run sitemap  # Generera sitemap.xml separat"
  - "npx tsc --noEmit # Typkontroll utan output"

next_steps:
  - "1.10 Code-splitting - lazy-load CropPage, separera CropIcon fran CropGraphic (plan klar)"
  - "1.5 Sasongsvy v1 - manadsbaserad startskarm"
  - "1.6 Frukt som fjarde kategori"
  - "Fortsatt faktacheck av fler profiler (hallon, basilika, artor...)"
  - "Fler profiler - manga locked crops kvar"

context:
  decisions:
    - "Footer: inline style i App.tsx, inte separat komponent - enkelt och tillrackligt"
    - "NutritionChart: ResizeObserver istallet for ResponsiveContainer - undviker -1 width/height bug"
    - "NutritionChart: animation avstaengd - prickar och linjer renderas samtidigt, renare"
    - "Recharts lazy-loaded via React.lazy i NutritionSection"
    - "chunkSizeWarningLimit hoojd till 1000KB temporart tills 1.10 implementeras"
    - "Nginx valt som hosting-plattform for produktion"
  constraints:
    - "Aldrig unicode-emojis i data eller UI"
    - "Aldrig en-dash i kallkod"
    - "All text pa svenska, kompis-ton, korrekt aao"
    - "SVG: 1.8px stroke, round caps, 24x24 ikoner, dampade farger"
    - "OP-sorter forst i alla sortrekommendationer"

known_issues:
  - "37 profiler, 5 faktacheckade (tomat, morot, potatis, sallat, lok)"
  - "32 profiler kvar att faktachecka"
  - "NPK-kurvor ar uppskattningar, ej matdata"
  - "Bundle size ~998KB i index.js (plan for 1.10 code-splitting finns)"
  - "NutritionChart gradient-IDs (nGrad, pGrad, kGrad) ar globala - kan krocka om flera chart renderas samtidigt"
